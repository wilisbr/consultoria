(function(){"use strict";var e={7170:function(e,a,t){var s=t(5130),o=t(6768);function n(e,a,t,s,n,r){const i=(0,o.g2)("Analise");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(i)])}var r=t(4232);const i={id:"wrapper"},l=(0,o.Lk)("option",{disabled:"",value:""},"Selecione a empresa",-1),c=["value"],d={class:"navbar is-success"},u={class:"navbar-brand"},m=(0,o.Lk)("strong",null,"Gestão e Consultoria",-1),p=(0,o.Lk)("span",{"aria-hidden":"true"},null,-1),h=(0,o.Lk)("span",{"aria-hidden":"true"},null,-1),v=(0,o.Lk)("span",{"aria-hidden":"true"},null,-1),f=[p,h,v],b={class:"navbar-end"},k={key:0,class:"navbar-item"},L={class:"buttons"},E={class:"section"},_=(0,o.Lk)("footer",{class:"footer"},[(0,o.Lk)("p",{class:"has-text-centered"},"Copyright (c) 2021")],-1),g=(0,o.Lk)("div",null,null,-1);function y(e,a,t,n,p,h){const v=(0,o.g2)("router-link"),y=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>p.idEmpresa=e)},[l,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(p.empresas,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.nome),9,c)))),128))],512),[[s.u1,p.idEmpresa]]),(0,o.Lk)("nav",d,[(0,o.Lk)("div",u,[(0,o.bF)(v,{to:"/",class:"navbar-item"},{default:(0,o.k6)((()=>[m])),_:1}),(0,o.Lk)("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:a[1]||(a[1]=a=>e.showMobileMenu=!e.showMobileMenu)},f)]),(0,o.Lk)("div",b,[(0,o.Lk)("div",{class:(0,r.C4)(["navbar-menu",{"is-active":e.showMobileMenu}]),id:"navbar-menu"},[p.idEmpresa?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",L,[(0,o.bF)(v,{to:{name:"informacoesGerais",params:{id:this.idEmpresa}}},{default:(0,o.k6)((()=>[(0,o.eW)(" Informações ")])),_:1},8,["to"]),(0,o.bF)(v,{to:{name:"lancamentos",params:{id:this.idEmpresa}}},{default:(0,o.k6)((()=>[(0,o.eW)(" Lançamentos ")])),_:1},8,["to"])])])):(0,o.Q3)("",!0)],2)])]),(0,o.Lk)("section",E,[((0,o.uX)(),(0,o.Wv)(y,{key:p.idEmpresa,onEmpresasAlteradas:e.fetchEmpresas},null,8,["onEmpresasAlteradas"]))]),_,g])}t(4114);var C=t(4373),q={data(){return{empresas:[],enquadramentosTributarios:[]}},methods:{async fetchEmpresas(e=null){const a=e?`http://localhost:8000/api/empresa/${e}/`:"http://localhost:8000/api/empresa/";await C.A.get(a,{headers:{"X-CSRFToken":this.$cookies.get("csrftoken")}}).then((e=>{this.empresas=e.data,console.log("As empresas foram lidas do banco de dados"),console.log(this.empresas)})).catch((e=>{console.error("There was an error fetching the items:",e)}))},fetchEnquadramentosTributarios(){C.A.get("http://localhost:8000/api/enquadramento_tributario/").then((e=>{this.enquadramentosTributarios=e.data})).catch((e=>{console.error("Error fetching empresa:",e)}))}}},x={name:"AnaliseEmpresa",mixins:[q],props:{},data(){return{empresas:[],idEmpresa:0}},created(){console.log(this.$cookies.get("csrftoken")),this.fetchEmpresas(),console.log("fetchItems")},methods:{},watch:{idEmpresa(e,a){console.log(e),console.log(a),e!==a&&this.$router.push({name:"lancamentos",params:{id:e}})}}},A=t(1241);const D=(0,A.A)(x,[["render",y]]);var w=D,R={name:"App",components:{Analise:w},data(){return{empresaSelecionada:""}},created(){console.log(this.$cookies.get("csrftoken"))},methods:{}};const I=(0,A.A)(R,[["render",n]]);var F=I,T=t(4570),$=t.n(T),O=t(973);const S={class:"container"},U=(0,o.Lk)("h1",{class:"title"},"Dados",-1),V={class:"field"},X=(0,o.Lk)("label",{class:"label"},"Nome",-1),M={class:"control"},j={class:"field"},J=(0,o.Lk)("label",{class:"label"},"Nome do Contato",-1),P={class:"control"},G={class:"field"},W=(0,o.Lk)("label",{class:"label"},"Tempo de Atividade",-1),Q={class:"control"},z={class:"field"},K=(0,o.Lk)("label",{class:"label"},"Quantidade de Sócios",-1),N={class:"control"},H={class:"field"},B=(0,o.Lk)("label",{class:"label"},"Quantidade de Funcionários",-1),Y={class:"control"},Z={class:"field"},ee=(0,o.Lk)("label",{class:"label"},"Ramo de Atividade",-1),ae={class:"control"},te={class:"field"},se=(0,o.Lk)("label",{class:"label"},"Principal Atividade",-1),oe={class:"control"},ne={class:"field"},re=(0,o.Lk)("label",{class:"label"},"Receita Anual",-1),ie={class:"control"},le={class:"field"},ce=(0,o.Lk)("label",{class:"label"},"Total de Investimento",-1),de={class:"control"},ue={class:"field"},me=(0,o.Lk)("label",{class:"label"},"Histórico da Empresa",-1),pe={class:"control"},he={class:"field"},ve=(0,o.Lk)("label",{class:"label"},"Pontos Críticos",-1),fe={class:"control"},be={class:"field"},ke=(0,o.Lk)("label",{class:"label"},"Enquadramento Tributário",-1),Le={class:"control"},Ee=["value"],_e={class:"field is-grouped"},ge=(0,o.Lk)("div",{class:"control"},[(0,o.Lk)("button",{class:"button is-link",type:"submit"},"Salvar")],-1),ye={class:"control"},Ce={class:"control"};function qe(e,a,t,n,i,l){return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("button",{class:"button is-primary",onClick:a[0]||(a[0]=(...e)=>l.prepareForCreate&&l.prepareForCreate(...e))},"Criar Nova Empresa"),U,i.empresa?((0,o.uX)(),(0,o.CE)("form",{key:0,onSubmit:a[15]||(a[15]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,o.Lk)("div",V,[X,(0,o.Lk)("div",M,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>i.empresa.nome=e),required:""},null,512),[[s.Jo,i.empresa.nome]])])]),(0,o.Lk)("div",j,[J,(0,o.Lk)("div",P,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>i.empresa.nome_contato=e),required:""},null,512),[[s.Jo,i.empresa.nome_contato]])])]),(0,o.Lk)("div",G,[W,(0,o.Lk)("div",Q,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number","onUpdate:modelValue":a[3]||(a[3]=e=>i.empresa.tempo_atividade=e),required:""},null,512),[[s.Jo,i.empresa.tempo_atividade]])])]),(0,o.Lk)("div",z,[K,(0,o.Lk)("div",N,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number","onUpdate:modelValue":a[4]||(a[4]=e=>i.empresa.quant_socios=e),required:""},null,512),[[s.Jo,i.empresa.quant_socios]])])]),(0,o.Lk)("div",H,[B,(0,o.Lk)("div",Y,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number","onUpdate:modelValue":a[5]||(a[5]=e=>i.empresa.quant_funcionarios=e),required:""},null,512),[[s.Jo,i.empresa.quant_funcionarios]])])]),(0,o.Lk)("div",Z,[ee,(0,o.Lk)("div",ae,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"text","onUpdate:modelValue":a[6]||(a[6]=e=>i.empresa.ramo_atividade=e),required:""},null,512),[[s.Jo,i.empresa.ramo_atividade]])])]),(0,o.Lk)("div",te,[se,(0,o.Lk)("div",oe,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"text","onUpdate:modelValue":a[7]||(a[7]=e=>i.empresa.principal_atividade=e),required:""},null,512),[[s.Jo,i.empresa.principal_atividade]])])]),(0,o.Lk)("div",ne,[re,(0,o.Lk)("div",ie,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number",step:"0.01","onUpdate:modelValue":a[8]||(a[8]=e=>i.empresa.receita_anual=e),required:""},null,512),[[s.Jo,i.empresa.receita_anual]])])]),(0,o.Lk)("div",le,[ce,(0,o.Lk)("div",de,[(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number",step:"0.01","onUpdate:modelValue":a[9]||(a[9]=e=>i.empresa.total_investimento=e),required:""},null,512),[[s.Jo,i.empresa.total_investimento]])])]),(0,o.Lk)("div",ue,[me,(0,o.Lk)("div",pe,[(0,o.bo)((0,o.Lk)("textarea",{class:"textarea","onUpdate:modelValue":a[10]||(a[10]=e=>i.empresa.historico_empresa=e)},null,512),[[s.Jo,i.empresa.historico_empresa]])])]),(0,o.Lk)("div",he,[ve,(0,o.Lk)("div",fe,[(0,o.bo)((0,o.Lk)("textarea",{class:"textarea","onUpdate:modelValue":a[11]||(a[11]=e=>i.empresa.pontos_criticos=e)},null,512),[[s.Jo,i.empresa.pontos_criticos]])])]),(0,o.Lk)("div",be,[ke,(0,o.Lk)("div",Le,[(0,o.bo)((0,o.Lk)("select",{class:"input","onUpdate:modelValue":a[12]||(a[12]=e=>i.empresa.enquadramento_tributario=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.enquadramentosTributarios,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.nome),9,Ee)))),128))],512),[[s.u1,i.empresa.enquadramento_tributario]])])]),(0,o.Lk)("div",_e,[ge,(0,o.Lk)("div",ye,[(0,o.Lk)("button",{class:"button is-link is-light",type:"button",onClick:a[13]||(a[13]=(...e)=>l.resetForm&&l.resetForm(...e))},"Cancelar")]),(0,o.Lk)("div",Ce,[(0,o.Lk)("button",{class:"button is-danger is-light",type:"button",onClick:a[14]||(a[14]=(...e)=>l.handleDelete&&l.handleDelete(...e))},"Excluir")])])],32)):(0,o.Q3)("",!0)])}var xe={name:"informacoesGerais",data(){return{empresa:null}},computed:{textEnquadramento(){return"simples"}},mixins:[q,q],watch:{"$route.params.id"(e){console.log("Route parameter changed:",e),this.fetchEmpresa(e)}},created(){this.fetchEmpresa(this.$route.params.id),this.fetchEnquadramentosTributarios()},methods:{async fetchEmpresa(e){await C.A.get(`http://localhost:8000/api/empresa/${e}/`).then((e=>{this.empresa=e.data})).catch((e=>{console.error("Error fetching empresa:",e)}))},handleSubmit(){this.empresa.id?this.updateEmpresa():this.createEmpresa()},createEmpresa(){C.A.post("http://localhost:8000/api/empresa/",this.empresa).then((e=>{this.empresa=e.data,alert("Empresa criada com sucesso!"),this.$emit("empresasAlteradas")})).catch((e=>{console.error("Error creating empresa:",e)}))},updateEmpresa(){C.A.put(`http://localhost:8000/api/empresa/${this.empresa.id}/`,this.empresa).then((e=>{this.empresa=e.data,alert("Empresa atualizada com sucesso!")})).catch((e=>{console.error("Error updating empresa:",e)}))},handleDelete(){confirm("Tem certeza que deseja excluir esta empresa?")&&C.A.delete(`http://localhost:8000/api/empresa/${this.empresa.id}/`).then((()=>{this.resetForm(),alert("Empresa excluída com sucesso!"),this.$emit("empresasAlteradas")})).catch((e=>{console.error("Error deleting empresa:",e)}))},resetForm(){this.empresa={id:null,nome:"",nome_contato:"",tempo_atividade:"",quant_socios:"",quant_funcionarios:"",ramo_atividade:"",principal_atividade:"",receita_anual:"",total_investimento:"",historico_empresa:"",pontos_criticos:"",enquadramento_tributario:""}},prepareForCreate(){this.resetForm()}}};const Ae=(0,A.A)(xe,[["render",qe]]);var De=Ae;const we={class:"container"},Re=(0,o.Lk)("option",{disabled:"",value:""},"Selecione a data base",-1),Ie=["value"],Fe=(0,o.Lk)("p",null,"DREs",-1),Te=(0,o.Lk)("br",null,null,-1),$e=(0,o.Lk)("hr",null,null,-1);function Oe(e,a,t,n,i,l){return(0,o.uX)(),(0,o.CE)("div",we,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.idDREMensal=e)},[Re,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.DREs,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.ano)+"-"+(0,r.v_)(e.mes),9,Ie)))),128))],512),[[s.u1,i.idDREMensal]]),Fe,(0,o.eW)(" "+(0,r.v_)(i.DREs)+" ",1),Te,(0,o.eW)(" "+(0,r.v_)(i.lancamentos)+" "+(0,r.v_)(i.tipo_lancamento_dre)+" ",1),$e])}var Se={name:"lancamentosCrud",data(){return{DREs:null,lancamentos:null,idDREMensal:null,tipo_lancamento_dre:null}},created(){this.fetch_DREs(this.$route.params.id),this.fetch_tipo_lancamento()},watch:{"$route.params.id"(e){this.fetch_DREs(e)},idDREMensal(e){this.fetch_lancamentos(e)}},methods:{async fetch_DREs(e){await C.A.get(`http://localhost:8000/api/dre_mensal/?empresa__id=${e}`).then((e=>{this.DREs=e.data,console.log(this.DREs)})).catch((e=>{console.error("Error fetching empresa:",e)}))},async fetch_lancamentos(e){await C.A.get(`http://localhost:8000/api/lancamento_dre/?DRE_mensal=${e}`).then((e=>{this.lancamentos=e.data,console.log(this.DREs)})).catch((e=>{console.error("Error fetching empresa:",e)}))},async fetch_tipo_lancamento(){await C.A.get("http://localhost:8000/api/tipo_lancamento_dre").then((e=>{this.lancamentos=e.data,console.log(this.DREs)})).catch((e=>{console.error("Error fetching empresa:",e)}))},openDialog(){this.dialogTitle="Adicionar Lançamento",this.editedIndex=-1,this.editedItem={...this.defaultItem},this.dialog=!0},closeDialog(){this.dialog=!1,this.$refs.form.reset()},editItem(e){this.dialogTitle="Editar Lançamento",this.editedIndex=this.lancamentos.indexOf(e),this.editedItem={...e},this.dialog=!0},deleteItem(e){const a=this.lancamentos.indexOf(e);confirm("Tem certeza que deseja excluir este item?")&&this.lancamentos.splice(a,1)},saveItem(){this.editedIndex>-1?Object.assign(this.lancamentos[this.editedIndex],this.editedItem):(this.editedItem.id=this.lancamentos.length+1,this.lancamentos.push({...this.editedItem})),this.closeDialog()}}};const Ue=(0,A.A)(Se,[["render",Oe]]);var Ve=Ue;const Xe=[{path:"/informacoesGerais/:id",name:"informacoesGerais",component:De},{path:"/lancamentos/:id",name:"lancamentos",component:Ve}],Me=(0,O.aE)({history:(0,O.LA)(),routes:Xe});var je=Me;const Je=(0,s.Ef)(F);Je.use($()),Je.use(je),Je.mount("#app")}},a={};function t(s){var o=a[s];if(void 0!==o)return o.exports;var n=a[s]={exports:{}};return e[s].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,s,o,n){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(t.O).every((function(e){return t.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=o();void 0!==c&&(a=c)}}return a}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,s){var o,n,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(a){return 0!==e[a]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(l)var d=l(t)}for(a&&a(s);c<r.length;c++)n=r[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},s=self["webpackChunkvue"]=self["webpackChunkvue"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],(function(){return t(7170)}));s=t.O(s)})();
//# sourceMappingURL=app.0dabf817.js.map